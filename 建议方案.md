# éƒ¨ç½²é—®é¢˜è¯Šæ–­ä¸å»ºè®®æ–¹æ¡ˆ

## é—®é¢˜æ€»ç»“

ç»è¿‡å¤šæ¬¡å°è¯•ï¼ŒVercel Serverless Functions æ— æ³•æ­£å¸¸è¿è¡Œåç«¯ APIã€‚ä¸»è¦åŸå› ï¼š

### Vercel Serverless çš„é™åˆ¶

1. **æ‰§è¡Œæ—¶é—´é™åˆ¶**: å…è´¹ç‰ˆ 10 ç§’è¶…æ—¶
2. **å†·å¯åŠ¨å»¶è¿Ÿ**: 2-5 ç§’
3. **æ¨¡å—ç³»ç»Ÿå¤æ‚**: CommonJS/ESM æ··ç”¨å¯¼è‡´é—®é¢˜
4. **æ•°æ®åº“è¿æ¥**: ä¸é€‚åˆæŒä¹…è¿æ¥å’Œè¿æ¥æ± 
5. **ä¾èµ–å®‰è£…**: å¤§é‡ä¾èµ–å¯¼è‡´æ„å»ºæ—¶é—´é•¿ã€ä½“ç§¯å¤§

### åç«¯é¡¹ç›®ç‰¹ç‚¹

- ä½¿ç”¨ Express + Sequelize + PostgreSQL
- å¤šä¸ªä¸­é—´ä»¶å’Œè·¯ç”±
- éœ€è¦ç¨³å®šçš„æ•°æ®åº“è¿æ¥
- ä¸é€‚åˆ Serverless ç¯å¢ƒ

## ğŸ¯ æ¨èæ–¹æ¡ˆï¼šå‰åç«¯åˆ†ç¦»éƒ¨ç½²

### æ¶æ„

```
å‰ç«¯ï¼ˆé™æ€èµ„æºï¼‰â†’ Vercel
åç«¯ï¼ˆAPI æœåŠ¡å™¨ï¼‰â†’ Railway
æ•°æ®åº“ â†’ Railway PostgreSQL
```

### ä¼˜ç‚¹

- âœ… **ç¨³å®šå¯é **: æ—  Serverless é™åˆ¶
- âœ… **æ€§èƒ½æ›´å¥½**: æ— å†·å¯åŠ¨å»¶è¿Ÿ
- âœ… **æ˜“äºè°ƒè¯•**: å®Œæ•´çš„æ—¥å¿—å’Œç›‘æ§
- âœ… **æˆæœ¬åˆç†**: Railway å…è´¹é¢åº¦è¶³å¤Ÿå¼€å‘æµ‹è¯•

---

## Railway éƒ¨ç½²æ•™ç¨‹ï¼ˆæ¨èï¼‰

### ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œ Railway

1. è®¿é—® https://railway.app/
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. ç»‘å®šä¿¡ç”¨å¡ï¼ˆå…è´¹é¢åº¦ï¼š$5/æœˆï¼Œè¶³å¤Ÿå°é¡¹ç›®ä½¿ç”¨ï¼‰

### ç¬¬äºŒæ­¥ï¼šåˆ›å»º PostgreSQL æ•°æ®åº“

1. ç‚¹å‡» "New Project"
2. é€‰æ‹© "Provision PostgreSQL"
3. ç­‰å¾…åˆ›å»ºå®Œæˆ
4. ç‚¹å‡»æ•°æ®åº“æœåŠ¡ï¼Œè¿›å…¥ "Variables" æ ‡ç­¾
5. å¤åˆ¶ `DATABASE_URL`ï¼ˆæ ¼å¼ï¼š`postgresql://...`ï¼‰

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²åç«¯

1. å›åˆ° Railway Dashboard
2. ç‚¹å‡» "New" â†’ "GitHub Repo"
3. é€‰æ‹©ä½ çš„ä»“åº“ï¼š`zhx83752021/petsite-ve`
4. é…ç½®æœåŠ¡ï¼š

   - **Root Directory**: `backend`
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm run start`

5. æ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆç‚¹å‡» "Variables" æ ‡ç­¾ï¼‰ï¼š

   ```
   DATABASE_URL=<ä»ç¬¬äºŒæ­¥å¤åˆ¶çš„æ•°æ®åº“ URL>
   NODE_ENV=production
   PORT=3001
   JWT_SECRET=your-super-secret-key-change-this
   JWT_EXPIRES_IN=7d
   CORS_ORIGIN=*
   ```

6. ç‚¹å‡» "Deploy"ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰

7. éƒ¨ç½²æˆåŠŸåï¼Œç‚¹å‡» "Settings" â†’ "Generate Domain"
   - ä¼šç”Ÿæˆä¸€ä¸ªåŸŸåï¼Œå¦‚ï¼š`petsite-backend.up.railway.app`
   - è¿™å°±æ˜¯ä½ çš„åç«¯ API åœ°å€

### ç¬¬å››æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

1. è®¿é—®ä½ çš„ Railway API åœ°å€ï¼š

   ```
   https://ä½ çš„åŸŸå.railway.app/api/init/database
   ```

2. å¦‚æœè¿”å›æˆåŠŸï¼Œæ•°æ®åº“è¡¨å·²åˆ›å»º

3. è¿è¡Œæ•°æ®æ’å…¥è„šæœ¬ï¼ˆåœ¨æœ¬åœ°ï¼‰ï¼š
   ```powershell
   # ä¿®æ”¹ backend/.env ä¸­çš„ DATABASE_URL ä¸º Railway çš„
   # ç„¶åè¿è¡Œ
   cd backend
   npm run ts-node scripts/add-more-products.ts
   ```

### ç¬¬äº”æ­¥ï¼šæ›´æ–°å‰ç«¯é…ç½®

1. ä¿®æ”¹ `frontend/.env.production`ï¼š

   ```env
   VITE_APP_TITLE=å® ç‰©ç½‘
   VITE_API_BASE_URL=https://ä½ çš„åŸŸå.railway.app/api
   VITE_CDN_URL=
   ```

2. æäº¤å¹¶æ¨é€ï¼š

   ```bash
   git add frontend/.env.production
   git commit -m "æ›´æ–°ç”Ÿäº§ç¯å¢ƒ API åœ°å€ä¸º Railway"
   git push origin main
   ```

3. Vercel ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²å‰ç«¯

### ç¬¬å…­æ­¥ï¼šæµ‹è¯•

1. è®¿é—® https://ski-row.cn/shop
2. åº”è¯¥èƒ½çœ‹åˆ°å•†å“åˆ—è¡¨
3. æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## Render éƒ¨ç½²æ•™ç¨‹ï¼ˆå¤‡é€‰ï¼‰

### ä¼˜ç‚¹

- å®Œå…¨å…è´¹ï¼ˆæ— éœ€ä¿¡ç”¨å¡ï¼‰
- è‡ªåŠ¨ HTTPS
- è‡ªå¸¦ PostgreSQL

### ç¼ºç‚¹

- å…è´¹ç‰ˆæœ‰ä¼‘çœ ï¼ˆ15 åˆ†é’Ÿæ— è¯·æ±‚åä¼‘çœ ï¼‰
- é¦–æ¬¡å”¤é†’éœ€è¦ 30-60 ç§’

### éƒ¨ç½²æ­¥éª¤

1. è®¿é—® https://render.com/
2. æ³¨å†Œå¹¶ç™»å½•
3. åˆ›å»º PostgreSQL æ•°æ®åº“ï¼ˆFree tierï¼‰
4. åˆ›å»º Web Serviceï¼š
   - è¿æ¥ GitHub ä»“åº“
   - Root Directory: `backend`
   - Build Command: `npm install && npm run build`
   - Start Command: `npm run start`
5. æ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆåŒ Railwayï¼‰
6. ç­‰å¾…éƒ¨ç½²å®Œæˆ
7. æ›´æ–°å‰ç«¯ `.env.production`

---

## å¿«é€Ÿå†³ç­–è¡¨

| éœ€æ±‚                    | æ¨èæ–¹æ¡ˆ       |
| ----------------------- | -------------- |
| æƒ³è¦æœ€ç¨³å®š              | Railway        |
| å®Œå…¨å…è´¹ï¼ˆæ— ä¿¡ç”¨å¡ï¼‰    | Render         |
| å·²æœ‰ Vercelï¼Œåªéœ€è¦åç«¯ | Railway        |
| æƒ³è¦æœ€å¿«éƒ¨ç½²            | Railway        |
| éœ€è¦é«˜å¹¶å‘              | Railway/Render |

---

## å½“å‰çŠ¶æ€

- âœ… å‰ç«¯å·²éƒ¨ç½²åˆ° Vercel
- âŒ åç«¯ API åœ¨ Vercel æ— æ³•æ­£å¸¸å·¥ä½œ
- ğŸ“‹ **å»ºè®®**: æŒ‰ç…§ä¸Šè¿°æ•™ç¨‹å°†åç«¯éƒ¨ç½²åˆ° Railway

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. â­ **æ¨è**: ä½¿ç”¨ Railway éƒ¨ç½²åç«¯ï¼ˆ15 åˆ†é’Ÿå®Œæˆï¼‰
2. æ›´æ–°å‰ç«¯ API åœ°å€
3. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
4. å®Œæˆï¼

---

## éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š

- é”™è¯¯ä¿¡æ¯æˆªå›¾
- éƒ¨ç½²æ—¥å¿—
- Railway/Render Dashboard æˆªå›¾

æˆ‘ä¼šå¸®ä½ è§£å†³ï¼
